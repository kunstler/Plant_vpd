packages:
  - plant
  - plant.assembly
  - loggr
  - rmarkdown
  - RColorBrewer

sources:
  - R

plot_options:
  tall:
    height: 6.5
    width: 5.5
  wide:
    height: 3.5
    width: 5.5
    pointsize: 10
  skinny:
    height: 4.5
    width: 3
    pointsize: 10
  square:
    height: 5.5
    width: 5.5

knitr_options:
  vignette:
    auto_figure_prefix: true
    chdir: true

targets:
  all:
    depends:
      - ms/ideas.pdf

  # NOTE: some issues getting dependencies to behave sensibly here
  # (manuscript rebuilding when figures change but tex does not)
  # figures:
  #   depends:

  ms/ideas.pdf:
    depends:
      - ms/ms.sty
      - ms/amnat.bst
    command: latex_build("ms/ideas.tex", "ms/references.bib", clean=TRUE)

  figures:
    depends:
    - figures/lma_gradient_single.pdf
    - figures/lma_gradient_multi.pdf:

  figures/lma_gradient_single.pdf:
    command: lma_gradient_plot(assembly_lma_single_1, assembly_lma_single_2, assembly_lma_single_3)
    plot: square

  figures/lma_gradient_multi.pdf:
    command: lma_gradient_plot(assembly_lma_multi_1, assembly_lma_multi_2, assembly_lma_multi_3)
    plot: square



  assembly_lma_single_1:
    command: run_assembly(disturbance_mean_interval=5, site_prod=0.8)

  assembly_lma_single_2:
    command: run_assembly(disturbance_mean_interval=5, site_prod=1.0)

  assembly_lma_single_3:
    command: run_assembly(disturbance_mean_interval=5, site_prod=1.2)

  assembly_lma_multi_1:
    command: run_assembly(disturbance_mean_interval=40, site_prod=0.8)

  assembly_lma_multi_2:
    command: run_assembly(disturbance_mean_interval=40, site_prod=1.0)

  assembly_lma_multi_3:
    command: run_assembly(disturbance_mean_interval=40, site_prod=1.2)
